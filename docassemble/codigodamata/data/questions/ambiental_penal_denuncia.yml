---
template: template_denuncia
content file:
  code: conteudo_denuncia

---
template: template_denuncia_cota
content file:  
  code: conteudo_denuncia_cota

---
code: |
  conteudo_denuncia = "denuncia.md"
  conteudo_denuncia_cota = "denuncia_cota.md"

---
mandatory: True
code: |
  set_language('pt')
  import re
  ato_processual_escolhido = "denúncia"
  orgao_execucao
  if fatos.there_are_any:
    for fato in fatos:
  #      fato.selected_crime
  #      fato.name.text
      fato.paragrafo_materialidade = fato.materialidade + " " + fato.doc_prova_materialidade + "  N. " + fato.num_doc_prova_materialidade + " elaborado por " + fato.orgao_doc_prova_materialidade + ". "
      # Fato.name.text contém o preceito primário
      descricao_fatica_texto = fato.name.text
      # Criando o atributo local_fato
      local_fato = fato.address + ", " +  fato.address  + ", " + fato.city + ", " + fato.state + ", "
      fato.local_fato = local_fato
    # Estabelecendo se a data do fato é exata ou não
      if fato.data_e_exata == 'sim':
        fato.intro_data = "No dia "
        fato.data_fato_texto = format_date(fato.data_fato_exata)      
      else:
        fato.intro_data = ""
        fato.data_fato_texto = fato.data_fato_aprox     
      if fato.hora_e_exata == 'sim':
        fato.hora_fato_texto = str(fato.hora_fato_exata)           
      else:
        fato.hora_fato_texto = fato.hora_fato_aprox
      fato.descricao_fato_tipico_1a_parte = fato.intro_data + fato.data_fato_texto + " " + fato.hora_fato_texto + " no local " + fato.local_fato     
      # Acrescenta coordenadas
      if fato.coordenadas == True:
        fato.descricao_fato_tipico_1a_parte = fato.descricao_fato_tipico_1a_parte + " nas proximidades das coordenadas " + fato.coordenadas
      fato.preceito_primario = fato.name.text
      fato.descricao_fato_tipico_2a_parte =  fato.preceito_primario  + fato.detalhamento_fatico  + " " + str(fato.quantificacao)+ " " + fato.unidade_quantidade + " " + fato.qualidade_obj_material
      fato.descricao_fato_tipico = fato.descricao_fato_tipico_1a_parte + ", o denunciado " + fato.descricao_fato_tipico_2a_parte
  cabimento_suspro = False
  justificativa_nao_cabimento_suspro = "Deixa-se de oferecer a proposta de transação penal e de suspensão condicional do processo (art. 89 da Lei 9.099/95) em razão da recusa do denunciado à prévia composição civil do dano ambiental, fato impeditivo para tais benefícios, 'ex vi' do disposto no art. 27 da Lei 9.605/98 e art. art. 89, § 1º, da Lei 9.099/95."
  insert_template_md = template_denuncia
  # Variável que indica que a minuta será formada pela junção de duas partes (ex: denúncia e cota da denúncia)  
  minuta_com_duas_partes = True
  # Recuo (indentação) na minuta
  insert_template_md_2 = template_denuncia_cota
  indent_num = 12
  indentation = indent_num*"&nbsp;"
  # gera nome do arquivo excluindo caracteres não aceitos
  simp_re = new_string = re.sub("[-,/]", "_", simp)

---
include:
 - ambiental_geral_descricao_fato_ilicito_desmatamento.yml
 - ambiental_penal_proposta_prd.yml
 - ambiental_penal_composicao_civil_dano_ambiental.yml
 - ambiental_penal_medidas_cautelares_diversas_prisao.yml 
 - comum_base_dados_cadastrais.yml
 - comum_dados_orgao.yml
 - comum_dados_proc.yml
 - comum_qualificacao_requerido.yml
 - comum_scripts.yml

---
mandatory: True
question: |
  ![tuiuiu](https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Tuiuiu_-_Ave_Simbolo_do_Pantanal_de_Mato_Grosso.jpg/800px-Tuiuiu_-_Ave_Simbolo_do_Pantanal_de_Mato_Grosso.jpg)
  Deu certo!
subquestion: |
  Sua minuta está pronta, agora é só baixar em PDF ou DOCX.
attachment:
  name: Sua petição 
  filename: ${ato_processual_escolhido + " "+ simp_re}  
  docx template file: minuta_cabecalho.docx
  pdf/a: True
buttons:
  - Exit: exit